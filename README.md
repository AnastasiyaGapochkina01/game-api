# RPG Управление персонажами с мониторингом и Redis
Это проект для создания и управления персонажами RPG

## Описание архитектуры
### Основной сервис
- **Go API сервис (порт 8080)**
  - Веб-интерфейс с неоновым фиолетовым стилем для создания персонажей.
  - Эндпоинты:
    - `/` — главная страница с кнопками
    - `/create` — форма создания персонажа
    - `/list` — список всех персонажей с отображением из Redis
    - `/metrics` — метрики в JSON (запросы и аптайм)
    - `/health` — проверка живости

- **Redis**
  - Хранит данные персонажей.

### Дополнительные сервисы
- **Prometheus Scraper (Go, порт 9101)**
  - Забирает JSON-метрики из основного API и отдает их в формате Prometheus.
  - Адрес забора метрик конфигурируется через переменную окружения `TARGET_METRICS_URL`.
- **Python Redis Consumer (Flask, порт 8081)**  
  - Подключается к Redis и выдает JSON со всеми сохранёнными персонажами.  
  - Эндпоинты:  
    - `/characters` — список персонажей из Redis  
    - `/health` — проверка сервиса

## Настройка окружения

- Go API получает адрес Redis из переменной `REDIS_ADDR`  
- Scraper читает `TARGET_METRICS_URL` (по умолчанию `http://game-api:8080/metrics`)  
- Python-сервис читает `REDIS_HOST` и `REDIS_PORT`

## Проверки
### В консоли
```bash
curl -i http://localhost:8080/metrics
curl -i http://localhost:8080/health
curl -i http://localhost:8080/list
```

### Просмотр в браузере
1) Открыть браузер и перейти на http://localhost:8080/
2) Здесь должна быть главная страница с кнопками «Создать персонажа» и «Посмотреть всех персонажей».
3) Нажать «Создать персонажа» — откроется форма с неоновым фиолетовым стилем, где можно заполнить имя, класс, уровень и отправить.
4) Нажать «Посмотреть всех персонажей» — увидите список созданных персонажей красиво отрисованным с тем же стилем.
